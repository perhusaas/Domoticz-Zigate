!function(){function t(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return n(t,e);var c=Object.prototype.toString.call(t).slice(8,-1);"Object"===c&&t.constructor&&(c=t.constructor.name);if("Map"===c||"Set"===c)return Array.from(t);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return n(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,c=new Array(n);e<n;e++)c[e]=t[e];return c}function e(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function c(t,n){for(var e=0;e<n.length;e++){var c=n[e];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(t,c.key,c)}}function i(t,n,e){return n&&c(t.prototype,n),e&&c(t,e),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"7wo0":function(n,c,r){"use strict";r.r(c),r.d(c,"SettingsModule",function(){return P});var a=r("M0ag"),o=r("iInd"),s=r("ey9i"),l=r("H+bZ"),u=r("ntpF"),b=r("8Y7J"),d=r("G0yt"),f=r("s7LF"),m=r("EApP"),g=r("TSSN"),p=r("SVse"),v=r("wTG2");function L(t,n){if(1&t&&(b.Tb(0,"div",4),b.Lc(1,"\n    "),b.Ob(2,"label",5),b.Lc(3,"\n    "),b.Tb(4,"div",6),b.Lc(5,"\n      "),b.Ob(6,"input",7),b.Lc(7,"\n    "),b.Sb(),b.Lc(8,"\n  "),b.Sb()),2&t){var e=b.ic(2);b.Ab(2),b.pc("translate",e.setting.Name)}}function h(t,n){if(1&t&&(b.Tb(0,"div",4),b.Lc(1,"\n    "),b.Ob(2,"label",5),b.Lc(3,"\n    "),b.Tb(4,"div",6),b.Lc(5,"\n      "),b.Ob(6,"input",7),b.Lc(7,"\n    "),b.Sb(),b.Lc(8,"\n  "),b.Sb()),2&t){var e=b.ic(2);b.Ab(2),b.pc("translate",e.setting.Name)}}function S(t,n){if(1&t&&(b.Tb(0,"div",4),b.Lc(1,"\n    "),b.Ob(2,"label",5),b.Lc(3,"\n    "),b.Tb(4,"div",6),b.Lc(5,"\n      "),b.Ob(6,"input",8),b.Lc(7,"\n    "),b.Sb(),b.Lc(8,"\n  "),b.Sb()),2&t){var e=b.ic(2);b.Ab(2),b.pc("translate",e.setting.Name)}}function T(t,n){if(1&t&&(b.Tb(0,"div",4),b.Lc(1,"\n    "),b.Ob(2,"label",5),b.Lc(3,"\n    "),b.Tb(4,"div",6),b.Lc(5,"\n      "),b.Ob(6,"input",9),b.Lc(7,"\n    "),b.Sb(),b.Lc(8,"\n  "),b.Sb()),2&t){var e=b.ic(2);b.Ab(2),b.pc("translate",e.setting.Name)}}function y(t,n){if(1&t&&(b.Tb(0,"div",4),b.Lc(1,"\n    "),b.Ob(2,"label",5),b.Lc(3,"\n    "),b.Tb(4,"div",6),b.Lc(5,"\n      "),b.Tb(6,"ng-select",10),b.Lc(7,"\n      "),b.Sb(),b.Lc(8,"\n    "),b.Sb(),b.Lc(9,"\n  "),b.Sb()),2&t){var e=b.ic(2);b.Ab(2),b.pc("translate",e.setting.Name),b.Ab(4),b.oc("items",e.list)("compareWith",e.compareNumeric)("closeOnSelect",!0)}}function O(t,n){if(1&t&&(b.Tb(0,"div",11),b.Lc(1,"\n    "),b.Ob(2,"input",12),b.Lc(3,"\n    "),b.Ob(4,"label",13),b.Lc(5,"\n  "),b.Sb()),2&t){var e=b.ic(2);b.Ab(2),b.pc("id",e.setting.Name),b.Ab(2),b.pc("for",e.setting.Name),b.pc("translate",e.setting.Name)}}function k(t,n){if(1&t&&(b.Tb(0,"div",1),b.Lc(1,"\n  "),b.Jc(2,L,9,1,"div",2),b.Lc(3,"\n  "),b.Jc(4,h,9,1,"div",2),b.Lc(5,"\n  "),b.Jc(6,S,9,1,"div",2),b.Lc(7,"\n  "),b.Jc(8,T,9,1,"div",2),b.Lc(9,"\n  "),b.Jc(10,y,10,4,"div",2),b.Lc(11,"\n  "),b.Jc(12,O,6,3,"div",3),b.Lc(13,"\n"),b.Sb()),2&t){var e=b.ic();b.oc("formGroupName",e.setting.Name),b.Ab(2),b.oc("ngIf","str"===e.setting.DataType),b.Ab(2),b.oc("ngIf","path"===e.setting.DataType),b.Ab(2),b.oc("ngIf","int"===e.setting.DataType),b.Ab(2),b.oc("ngIf","hex"===e.setting.DataType),b.Ab(2),b.oc("ngIf","list"===e.setting.DataType),b.Ab(2),b.oc("ngIf","bool"===e.setting.DataType)}}new s.c("SettingComponent");var N,A=((N=function(){function t(n,c,i){e(this,t),this.formBuilder=n,this.fgd=c,this.translate=i,this.list=[]}return i(t,[{key:"ngOnChanges",value:function(t){var n,e=this;if(t.setting&&t.setting.currentValue){this.setting=t.setting.currentValue,"hex"===this.setting.DataType?n=this.formBuilder.group({current:["",f.q.compose([f.q.required,f.q.pattern("^[0-9A-Fa-f]+")])]}):"bool"===this.setting.DataType?n=this.formBuilder.group({current:[]}):"list"===this.setting.DataType?(n=this.formBuilder.group({current:[null,f.q.required]}),this.list=[],this.setting.list.forEach(function(t){var n=Object.keys(t)[0],c=Object.values(t)[0];e.list.push({label:n,value:c})})):n=this.formBuilder.group({current:["",f.q.required]}),this.fgd.form.addControl(this.setting.Name,n);var c=""!==this.setting.current_value?this.setting.current_value:this.setting.default_value;this.fgd.form.get(this.setting.Name).get("current").patchValue(c)}}},{key:"compareNumeric",value:function(t,n){return isNaN(t.value)?t.value===n:t.value===Number(n)}}]),t}()).\u0275fac=function(t){return new(t||N)(b.Nb(f.d),b.Nb(f.f),b.Nb(g.d))},N.\u0275cmp=b.Hb({type:N,selectors:[["app-setting"]],inputs:{setting:"setting",advanced:"advanced"},features:[b.zb([],[{provide:f.b,useExisting:f.f}]),b.yb],decls:2,vars:1,consts:[[3,"formGroupName",4,"ngIf"],[3,"formGroupName"],["class","form-group row mt-2",4,"ngIf"],["class","row mt-2 custom-control custom-checkbox",4,"ngIf"],[1,"form-group","row","mt-2"],["for","current",1,"col-sm-6","col-form-label",3,"translate"],[1,"col-sm"],["type","text","formControlName","current",1,"w-100","form-control"],["type","number","formControlName","current",1,"w-50","form-control"],["type","text","formControlName","current",1,"w-50","form-control"],["bindLabel","label","bindValue","value","formControlName","current",3,"items","compareWith","closeOnSelect"],[1,"row","mt-2","custom-control","custom-checkbox"],["formControlName","current","type","checkbox",1,"custom-control-input","form-control",3,"id"],[1,"ml-3","custom-control-label",3,"for","translate"]],template:function(t,n){1&t&&(b.Jc(0,k,14,7,"div",0),b.Lc(1,"\n")),2&t&&b.oc("ngIf",!1===n.setting.Advanced||n.advanced===n.setting.Advanced)},directives:[p.n,f.l,f.g,g.a,f.c,f.k,f.e,f.o,v.a,f.a],styles:[".custom-control-input.is-valid[_ngcontent-%COMP%] ~ .custom-control-label[_ngcontent-%COMP%], was-validated[_ngcontent-%COMP%]   .custom-control-input[_ngcontent-%COMP%]:valid ~ .custom-control-label[_ngcontent-%COMP%]{color:#000}"]}),N),w=["contentRestart"];function C(t,n){if(1&t&&(b.Rb(0),b.Lc(1,"\n                  "),b.Ob(2,"app-setting",28),b.Lc(3,"\n                "),b.Qb()),2&t){var e=n.$implicit,c=b.ic(4);b.Ab(2),b.oc("setting",e)("advanced",c.advanced)}}function I(t,n){if(1&t&&(b.Tb(0,"div",22),b.Lc(1,"\n            "),b.Ob(2,"div",23),b.Lc(3,"\n            "),b.Tb(4,"div",24),b.Lc(5,"\n              "),b.Tb(6,"div",25),b.Lc(7,"\n                "),b.Ob(8,"h5",26),b.Lc(9,"\n              "),b.Sb(),b.Lc(10,"\n              "),b.Tb(11,"div",27),b.Lc(12,"\n                "),b.Jc(13,C,4,2,"ng-container",20),b.Lc(14,"\n              "),b.Sb(),b.Lc(15,"\n            "),b.Sb(),b.Lc(16,"\n          "),b.Sb()),2&t){var e=b.ic().$implicit;b.Ab(2),b.qc("translate","setting.header.",e._Theme,""),b.Ab(6),b.qc("translate","setting.subtitle.",e._Theme,""),b.Ab(5),b.oc("ngForOf",e.ListOfSettings)}}function J(t,n){if(1&t&&(b.Tb(0,"div"),b.Lc(1,"\n          "),b.Jc(2,I,17,3,"div",21),b.Lc(3,"\n        "),b.Sb()),2&t){var e=n.$implicit,c=b.ic(2);b.Ab(2),b.oc("ngIf",c.hasBasicSettings(e.ListOfSettings))}}function _(t,n){if(1&t){var e=b.Ub();b.Tb(0,"form",4),b.Lc(1,"\n  "),b.Tb(2,"fieldset",5),b.Lc(3,"\n    "),b.Tb(4,"legend"),b.Lc(5,"\n      "),b.Tb(6,"div",6),b.Lc(7,"\n        "),b.Tb(8,"div",7),b.Lc(9,"setting.help.legend"),b.Sb(),b.Lc(10,"\n        "),b.Tb(11,"div",8),b.Lc(12,"\n          "),b.Tb(13,"div",9),b.Lc(14,"\n            "),b.Tb(15,"div",10),b.Lc(16,"\n              "),b.Tb(17,"button",11),b.ec("click",function(){return b.Bc(e),b.ic().updateSettings()}),b.Sb(),b.Lc(18,"\n            "),b.Sb(),b.Lc(19,"\n            "),b.Tb(20,"div",12),b.Lc(21,"\n              "),b.Tb(22,"button",13),b.ec("click",function(){return b.Bc(e),b.ic().reinitSettings()}),b.Sb(),b.Lc(23,"\n            "),b.Sb(),b.Lc(24,"\n            "),b.Tb(25,"div",14),b.Lc(26,"\n              "),b.Tb(27,"input",15),b.ec("click",function(t){return b.Bc(e),b.ic().advancedSettings(t)}),b.Sb(),b.Lc(28,"\n              "),b.Ob(29,"label",16),b.Lc(30,"\n            "),b.Sb(),b.Lc(31,"\n          "),b.Sb(),b.Lc(32,"\n        "),b.Sb(),b.Lc(33,"\n      "),b.Sb(),b.Lc(34,"\n    "),b.Sb(),b.Lc(35,"\n    "),b.Ob(36,"a",17),b.Lc(37,"\n  "),b.Sb(),b.Lc(38,"\n  "),b.Tb(39,"div",18),b.Lc(40,"\n    "),b.Tb(41,"div",6),b.Lc(42,"\n      "),b.Tb(43,"div",19),b.Lc(44,"\n        "),b.Jc(45,J,4,1,"div",20),b.Lc(46,"\n      "),b.Sb(),b.Lc(47,"\n    "),b.Sb(),b.Lc(48,"\n  "),b.Sb(),b.Lc(49,"\n"),b.Sb()}if(2&t){var c=b.ic();b.oc("formGroup",c.form),b.Ab(17),b.oc("disabled",!c.form.valid),b.Ab(10),b.oc("checked",c.advanced),b.Ab(18),b.oc("ngForOf",c.settings)}}function j(t,n){1&t&&(b.Lc(0,"\n  "),b.Tb(1,"div",29),b.Lc(2,"\n    "),b.Ob(3,"h4",30),b.Lc(4,"\n    "),b.Tb(5,"button",31),b.ec("click",function(){return n.$implicit.dismiss("Cross click")}),b.Lc(6,"\n      "),b.Tb(7,"span",32),b.Lc(8,"\xd7"),b.Sb(),b.Lc(9,"\n    "),b.Sb(),b.Lc(10,"\n  "),b.Sb(),b.Lc(11,"\n  "),b.Ob(12,"div",33),b.Lc(13,"\n  "),b.Tb(14,"div",34),b.Lc(15,"\n    "),b.Tb(16,"button",35),b.ec("click",function(){return n.$implicit.dismiss("cancel")}),b.Sb(),b.Lc(17,"\n  "),b.Sb(),b.Lc(18,"\n"))}function R(t,n){1&t&&(b.Lc(0,"\n  "),b.Tb(1,"div",29),b.Lc(2,"\n    "),b.Ob(3,"h4",36),b.Lc(4,"\n    "),b.Tb(5,"button",31),b.ec("click",function(){return n.$implicit.dismiss("Cross click")}),b.Lc(6,"\n      "),b.Tb(7,"span",32),b.Lc(8,"\xd7"),b.Sb(),b.Lc(9,"\n    "),b.Sb(),b.Lc(10,"\n  "),b.Sb(),b.Lc(11,"\n  "),b.Ob(12,"div",37),b.Lc(13,"\n  "),b.Tb(14,"div",34),b.Lc(15,"\n    "),b.Tb(16,"button",38),b.ec("click",function(){return n.$implicit.dismiss("cancel")}),b.Sb(),b.Lc(17,"\n  "),b.Sb(),b.Lc(18,"\n"))}function x(t,n){1&t&&(b.Lc(0,"\n  "),b.Tb(1,"div",29),b.Lc(2,"\n    "),b.Ob(3,"h4",39),b.Lc(4,"\n    "),b.Tb(5,"button",31),b.ec("click",function(){return n.$implicit.dismiss("Cross click")}),b.Lc(6,"\n      "),b.Tb(7,"span",32),b.Lc(8,"\xd7"),b.Sb(),b.Lc(9,"\n    "),b.Sb(),b.Lc(10,"\n  "),b.Sb(),b.Lc(11,"\n  "),b.Ob(12,"div",40),b.Lc(13,"\n  "),b.Tb(14,"div",34),b.Lc(15,"\n    "),b.Tb(16,"button",41),b.ec("click",function(){return n.$implicit.dismiss("cancel")}),b.Sb(),b.Lc(17,"\n  "),b.Sb(),b.Lc(18,"\n"))}new s.c("SettingsComponent");var B,D,E,q=[{path:"",component:(B=function(){function n(t,c,i,r,a,o){e(this,n),this.modalService=t,this.apiService=c,this.formBuilder=i,this.toastr=r,this.headerService=a,this.translate=o,this.advanced=!1}return i(n,[{key:"ngOnInit",value:function(){var t=this;this.form=this.formBuilder.group({}),this.apiService.getSettings().subscribe(function(n){t.settings=n,t.settings.sort(function(t,n){return t._Order-n._Order})})}},{key:"reinitSettings",value:function(){this.settings.forEach(function(t){var n=[];t.ListOfSettings.forEach(function(t){"path"!==t.DataType&&(t.current_value=t.default_value),n.push(Object.assign({},t))}),t.ListOfSettings=n}),this.settings=t(this.settings),this.form.markAsTouched()}},{key:"advancedSettings",value:function(t){this.advanced=!!t.currentTarget.checked}},{key:"updateSettings",value:function(){var t=this;this.form.invalid?this.form.markAsTouched():(Object.keys(this.form.value).forEach(function(n){!0===t.form.value[n].current?t.form.value[n].current=1:!1===t.form.value[n].current&&(t.form.value[n].current=0)}),this.apiService.putSettings(this.form.value).subscribe(function(n){t.form.markAsPristine(),t.toastr.success(t.translate.instant("api.global.succes.update.title")),t.apiService.getSettings().subscribe(function(n){t.settings=n,t.settings.sort(function(t,n){return t._Order-n._Order})}),t.apiService.getRestartNeeded().subscribe(function(n){1===n.RestartNeeded?(t.headerService.setRestart(!0),t.open(t.contentRestart)):2===n.RestartNeeded?t.open(t.contentReset):3===n.RestartNeeded&&t.open(t.contentErase)})}))}},{key:"open",value:function(t){this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"}).result.then(function(t){},function(t){})}},{key:"hasBasicSettings",value:function(t){return!!this.advanced||t.filter(function(t){return!1===t.Advanced}).length>0}}]),n}(),B.\u0275fac=function(t){return new(t||B)(b.Nb(d.e),b.Nb(l.a),b.Nb(f.d),b.Nb(m.b),b.Nb(u.a),b.Nb(g.d))},B.\u0275cmp=b.Hb({type:B,selectors:[["app-settings"]],viewQuery:function(t,n){var e;1&t&&(b.Rc(w,!0),b.Rc(w,!0),b.Rc(w,!0)),2&t&&(b.xc(e=b.fc())&&(n.contentRestart=e.first),b.xc(e=b.fc())&&(n.contentReset=e.first),b.xc(e=b.fc())&&(n.contentErase=e.first))},decls:11,vars:1,consts:[[3,"formGroup",4,"ngIf"],["contentRestart",""],["contentReset",""],["contentErase",""],[3,"formGroup"],[1,"h-100"],[1,"row"],["translate","",1,"col-sm-4"],[1,"col-sm-8"],[1,"d-flex","flex-row-reverse","align-items-center"],[1,"p-2"],["translate","setting.validate.button",1,"btn","btn-primary",3,"disabled","click"],[1,"p-2","ml-3"],["translate","setting.reinit.button",1,"btn","btn-secondary",3,"click"],[1,"switch","switch-sm"],["type","checkbox","id","switch-advanced",1,"switch",3,"checked","click"],["for","switch-advanced","translate","setting.advanced.button",1,"mb-0"],["href","https://github.com/pipiche38/Domoticz-Zigate-Wiki/blob/master/en-eng/PluginConf.json.md","translate","setting.help.link","target","_blank"],[1,"mt-3"],[1,"col-sm-12","card-columns"],[4,"ngFor","ngForOf"],["class","card",4,"ngIf"],[1,"card"],[1,"card-header",3,"translate"],[1,"card-body"],[1,"card-title"],[3,"translate"],[1,"card-text"],[3,"setting","advanced"],[1,"modal-header"],["id","modal-basic-title","translate","setting.reloadplugin.alert.title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["translate","setting.reloadplugin.alert.subject",1,"modal-body"],[1,"modal-footer"],["type","button","translate","setting.reloadplugin.alert.cancel",1,"btn","btn-outline-dark",3,"click"],["id","modal-basic-title","translate","setting.resetplugin.alert.title",1,"modal-title"],["translate","setting.resetplugin.alert.subject",1,"modal-body"],["type","button","translate","setting.resetplugin.alert.cancel",1,"btn","btn-outline-dark",3,"click"],["id","modal-basic-title","translate","setting.eraseplugin.alert.title",1,"modal-title"],["translate","setting.eraseplugin.alert.subject",1,"modal-body"],["type","button","translate","setting.eraseplugin.alert.cancel",1,"btn","btn-outline-dark",3,"click"]],template:function(t,n){1&t&&(b.Jc(0,_,50,4,"form",0),b.Lc(1,"\n\n"),b.Jc(2,j,19,0,"ng-template",null,1,b.Kc),b.Lc(4,"\n\n"),b.Jc(5,R,19,0,"ng-template",null,2,b.Kc),b.Lc(7,"\n\n"),b.Jc(8,x,19,0,"ng-template",null,3,b.Kc),b.Lc(10,"\n")),2&t&&b.oc("ngIf",n.settings)},directives:[p.n,f.s,f.l,f.f,g.a,p.m,A],styles:[""]}),B),data:{title:Object(s.d)("settings")}}],$=((E=function t(){e(this,t)}).\u0275mod=b.Lb({type:E}),E.\u0275inj=b.Kb({factory:function(t){return new(t||E)},providers:[],imports:[[o.i.forChild(q)],o.i]}),E),P=((D=function t(){e(this,t)}).\u0275mod=b.Lb({type:D}),D.\u0275inj=b.Kb({factory:function(t){return new(t||D)},imports:[[$,a.a]]}),D)}}])}();